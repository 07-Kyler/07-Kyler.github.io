<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>题解笔记</title>

  <!-- ======================
       KaTeX
  ======================= -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
    onload="renderMathInElement(document.body,{
      delimiters:[
        {left:'$$',right:'$$',display:true},
        {left:'$',right:'$',display:false},
        {left:'\\(',right:'\\)',display:false},
        {left:'\\[',right:'\\]',display:true}
      ],
      throwOnError:false
    });">
  </script>

  <!-- ======================
       highlight.js
  ======================= -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/cpp.min.js"></script>

  <!-- ======================
       marked
  ======================= -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- ======================
       样式
  ======================= -->
  <style>
    /* ===== 全局 ===== */
    html, body {
      margin: 0;
      padding: 0;
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: url("assets/images/background.jpg") center / cover fixed;
    }

    .bg-mask {
      min-height: 100vh;
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(4px);
    }

    body.light .bg-mask {
      background: rgba(255,255,255,0.25);
    }

    /* ===== 布局 ===== */
    .layout {
      display: flex;
      padding: 120px 40px 60px;
      gap: 32px;
      max-width: 1400px;
      margin: 0 auto;
    }

    /* ===== 左侧导航（无小圆点） ===== */
    .sidebar {
      width: 260px;
      padding: 18px;
      border-radius: 20px;
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(12px);
    }

    .sidebar ul {
      list-style: none;       /* ✅ 关键：去掉小圆点 */
      padding: 0;
      margin: 0;
    }

    .sidebar li {
      margin-bottom: 12px;
    }

    .sidebar a {
      display: block;
      padding: 12px 16px;
      border-radius: 12px;
      text-decoration: none;
      color: #fff;
      background: rgba(255,255,255,0.08);
      transition: transform 0.2s, background 0.2s;
    }

    .sidebar a:hover {
      transform: translateX(6px);
      background: rgba(255,255,255,0.18);
    }

    body.light .sidebar a {
      color: #111;
    }

    /* ===== 右侧内容 ===== */
    .content {
      flex: 1;
      padding: 40px;
      border-radius: 24px;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(16px);
    }

    body.light .content {
      color: #111;
    }

    /* ===== Markdown 内容 ===== */
    .content h1, .content h2, .content h3 {
      border-bottom: 1px solid rgba(255,255,255,0.2);
      padding-bottom: 6px;
    }

    body.light .content h1,
    body.light .content h2,
    body.light .content h3 {
      border-color: rgba(0,0,0,0.15);
    }

    /* ===== 代码块（重点区域） ===== */
    pre {
      margin: 24px 0;
      padding: 20px 24px;
      border-radius: 16px;
      overflow-x: auto;

      /* ✅ 玻璃感，不遮背景 */
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(14px);
    }

    /* 深色模式：再浅一点，避免糊死 */
    body:not(.light) pre {
      background: rgba(0,0,0,0.28);
    }

    /* 浅色模式：不动背景，只调字体 */
    body.light pre {
      background: rgba(255,255,255,0.35);
    }

    /* ===== 高亮字体对比度修正（只改字体） ===== */
    body.light .hljs {
      color: #1a1a1a;
    }

    body.light .hljs-keyword,
    body.light .hljs-title,
    body.light .hljs-built_in {
      color: #0033aa;
      font-weight: 600;
    }

    body.light .hljs-string {
      color: #006400;
    }

    body.light .hljs-number {
      color: #8b0000;
    }

    body.light .hljs-comment {
      color: #555;
      font-style: italic;
    }

    /* 禁止主题背景覆盖 */
    pre code.hljs {
      background: transparent !important;
    }
  </style>
</head>

<body>
<div class="bg-mask">
  <div class="layout">
    <aside class="sidebar">
      <ul id="nav"></ul>
    </aside>

    <main class="content" id="content"></main>
  </div>
</div>

<script>
/* ======================
   marked + highlight 强绑定
====================== */
marked.setOptions({
  highlight: function(code, lang) {
    if (lang && hljs.getLanguage(lang)) {
      return hljs.highlight(code, { language: lang }).value;
    }
    return hljs.highlightAuto(code).value;
  }
});

/* 示例：加载 markdown */
fetch("example.md")
  .then(res => res.text())
  .then(md => {
    document.getElementById("content").innerHTML = marked.parse(md);
    hljs.highlightAll();   // ✅ 强制执行
  });
</script>
</body>
</html>
